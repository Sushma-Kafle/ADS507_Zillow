# Metabase Analytics – Zillow Housing Pipeline

This document summarizes the four required visualizations built in Metabase using the transformed data marts generated by the Airflow ETL pipeline.

The data originates from Zillow Research (ZHVI and ZORI datasets), is processed through raw, staging, and mart layers in PostgreSQL, and visualized using Metabase.

---

## 1️⃣ Time Series of Home Values by State
**Table Used:** mart_housing_time_series  
**Visualization:** Line Chart  

This chart displays the trend of average home values over time by state.

- X-axis: Date  
- Y-axis: Average home_value  
- Series: State  

**Insight:**  
This visualization highlights long-term appreciation patterns and cyclical trends in housing markets across states. It allows comparison of growth trajectories and volatility between regions.

---

## 2️⃣ Price-to-Rent Ratio by State (Map)
**Table Used:** mart_housing_time_series  
**Visualization:** Geographic Map  

This map shows the average price-to-rent ratio for each state.

- Aggregation: Average price_to_rent_ratio  
- Grouped by: State  

**Insight:**  
Higher ratios may indicate markets where buying is relatively more expensive compared to renting, while lower ratios suggest more rental affordability relative to purchase prices. This metric helps assess housing market balance.

---

## 3️⃣ Year-over-Year Home Value Growth by State
**Table Used:** mart_housing_growth  
**Visualization:** Bar Chart  

This chart presents the average year-over-year percentage growth in home values by state.

- X-axis: State  
- Y-axis: Average home_value_yoy_growth  

**Insight:**  
This chart enables quick identification of high-growth versus slow-growth markets and highlights regional momentum shifts in housing value appreciation.

---

## 4️⃣ Home Value vs Rent Value Scatter Plot
**Table Used:** mart_housing_time_series  
**Visualization:** Scatter Plot  

This scatter plot compares average home values against average rent values by state.

- X-axis: Average home_value  
- Y-axis: Average rent_value  

**Insight:**  
The scatter plot illustrates correlation between housing prices and rental prices. States with higher home values typically show higher rent values, indicating strong positive correlation between ownership and rental markets.

---

## Pipeline Architecture Overview

1. Extract ZHVI and ZORI datasets from local mounted CSV files.
2. Load raw data into PostgreSQL (raw layer).
3. Transform into long format and calculate derived metrics.
4. Build mart tables:
   - mart_housing_time_series
   - mart_housing_growth
5. Visualize results in Metabase.

This workflow demonstrates a complete modern data pipeline:
Docker → Airflow → PostgreSQL → Analytics Layer → BI Visualization.